{"mappings":"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","sources":["src/assets/js/galeri.js"],"sourcesContent":["let api = \"https://moonlgh-orange-space-chainsaw-j94649gpgq6frq6-8080.preview.app.github.dev/\"\n\n\nasync function main(){\n    if(localStorage.getItem(\"username\") && localStorage.getItem(\"password\") && document.querySelector(\"#user\")){\n        let user = localStorage.getItem('username');\n        let pass = localStorage.getItem('password');\n        let data = await fetch(api + \"api/login\",{\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                username: user,\n                password: pass\n            })\n        })\n        let json = await data.json()\n        if(json.status == 200){\n            showUser(user);\n        }\n    }\n}\n\n\nfunction showUser(user){\n    document.querySelector(\"#user\").classList.remove(\"hidden\");\n    document.querySelector(\"#name\").innerText = `Selamat datang, ${user}!`;\n}\n\nmain()\n\nasync function submit(){\n    let date = document.getElementById(\"date\").value\n    let idAcara = document.getElementById(\"idAcara\").value\n    let namaAcara = document.getElementById(\"namaAcara\").value\n    let deskripsi = document.getElementById(\"deskripsi\").value\n    let link = document.getElementById(\"link\").value\n    let res = await fetch(api + \"api/addFolder\",{\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            tanggal: date,\n            idAcara,\n            namaAcara,\n            deskripsiAcara:deskripsi,\n            url:link,\n            user: localStorage.getItem(\"username\"),\n            username: localStorage.getItem(\"username\"),\n            password: localStorage.getItem(\"password\")\n        })\n    })\n\n    let json = await res.json()\n    console.log(json)\n    if(json.status == 200){\n        alert(\"Berhasil menambahkan acara!\")\n    } else {\n        alert(\"Gagal menambahkan acara!\")\n    }\n\n}\n\nloadData()\nasync function loadData() {\n    if(!document.querySelector(\"#acara-table\")){\n        return\n    }\n    console.log(\"Loading Data\")\n    let res = await fetch(api + \"api/allFolders\");\n    let data = await res.json();\n    console.log(data.message)\n    if (data.status === 200) {\n        let table = document.getElementById(\"acara-table\");\n        let rows = \"\";\n        for (let i = 0; i < data.message.length; i++) {\n            let json = data.message[i]\n            rows += `\n            <tbody>\n        <tr class=\"bg-white\">\n            <td class=\"px-4 py-2\">${json.namaAcara}</td>\n            <td class=\"px-4 py-2\">${json.idAcara}</td>\n            <td class=\"px-4 py-2\"><button data-tooltip-target=\"tooltip-${json.idAcara}\" type=\"button\" class=\"text-white bg-mpk-700 hover:bg-mpk-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:focus:ring-blue-800\">Link</button>\n            <div id=\"tooltip-${json.idAcara}\" role=\"tooltip\" class=\"absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700\">\n                ${json.url}\n                <div class=\"tooltip-arrow\" data-popper-arrow></div>\n            </div></td>\n            <td class=\"px-4 py-2\">${json.tanggal}</td>\n            <td class=\"px-4 py-2\"><button onclick=\"deleteId('${json.idAcara}')\" class=\"btn btn-primary\">Delete</button></td>\n        </tr>\n        </tbody>\n        `;\n    }\n    console.log(rows)\n    table.innerHTML += rows;\n    table.classList.add(\"table-auto\")\n}\n}\n\n\nasync function deleteId(e){\n    let confirmation = confirm(\"Yakin kah ?\")\n    if(!confirmation) return\n\n    let res = await fetch(api + \"api/remFolder\", {\n        method: \"DELETE\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ \n            username: localStorage.getItem(\"username\"),\n            password: localStorage.getItem(\"password\"),\n            idAcara:e }),\n    });\n\n    let data = await res.json()\n    console.log(data)\n    if(data.status === 200) {\n        alert(data.message)\n        document.location.reload()\n    } else {\n        alert(data.message)\n    }\n\n}\n\nloadGrid()\nasync function loadGrid(){\n    if(!document.getElementById(\"grid-galeri\")){\n        return\n    }\n    let res = await fetch(api + \"api/allFolders\");\n    let data = await res.json();\n    console.log(data.message)\n    if (data.status === 200) {\n        for (let i = 0; i < data.message.length; i++) {\n            let json = data.message[i]\n\n            let folderId = getDriveIdFromUrl(json.url)\n            console.log(folderId)\n            let dataJson = await fetch(api + \"api/getFiles\",{\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    folderId\n                })        \n            })\n            let dataImage = await dataJson.json()\n            // if dataImage.files[0].mimeType == \"application/vnd.google-apps.folder\", loop get files again\n            if(dataImage.files[0].mimeType == \"application/vnd.google-apps.folder\"){\n                let dataJson = await fetch(api + \"api/getFiles\",{\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        folderId: dataImage.files[0].id\n                    })\n                })\n                dataImage = await dataJson.json()\n            }\n\n            console.log(dataImage)\n            let preview = dataImage.files.find((e) => e.mimeType.startsWith(\"image/\"))\n\n            console.log(preview)\n            let grid = document.getElementById(\"grid-galeri\")\n            grid.innerHTML += `\n            <div class=\"card w-96 mt-12 h-40 bg-base-100 shadow-xl image-full m-auto\">\n  <figure><img class=\"h-40\" src=\"https://drive.google.com/uc?id=${preview.id}&export=download\" alt=\"Shoes\" /></figure>\n  <div class=\"card-body\">\n    <h2 class=\"card-title\">${json.namaAcara}</h2>\n    <p>Tanggal ${(new Date(json.tanggal)).toLocaleDateString('en-GB')}</p>\n    <div class=\"card-actions justify-end\">\n      <button class=\"btn btn-primary\">Buka</button>\n    </div>\n  </div>\n</div>\n            `\n\n        }\n    } else {\n        alert(\"Gagal mengambil data\")\n    }\n}\n\nfunction getDriveIdFromUrl(url) {\n    // Extract the file ID from the URL\n    const match = url.match(/\\/([a-zA-Z0-9_-]{25,})/);\n    if (match) {\n      return match[1];\n    } else {\n      return null;\n    }\n  }"],"names":["api","async","main","localStorage","getItem","document","querySelector","user","pass","data","fetch","method","headers","body","JSON","stringify","username","password","json","status","showUser","classList","remove","innerText","submit","date","getElementById","value","idAcara","namaAcara","deskripsi","link","res","tanggal","deskripsiAcara","url","console","log","alert","loadData","message","table","rows","i","length","innerHTML","add","deleteId","e","confirm","location","reload","loadGrid","folderId","getDriveIdFromUrl","dataJson","dataImage","files","mimeType","id","preview","find","startsWith","Date","toLocaleDateString","match"],"version":3,"file":"addImage.039cc74b.js.map"}